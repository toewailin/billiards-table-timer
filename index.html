<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billiards Countdown Timer</title>
    <style>
        /* Combined styles.css and time.css content */
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }

        #tables-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
            margin: auto;
            justify-items: center;
            overflow-y: auto;
            max-height: calc(100vh - 200px);
            /* Adjust based on other content height */
        }

        .table {
            background-color: white;
            border: 2px solid #000;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            width: 100%;
            margin-bottom: 20px;
        }

        .timer {
            font-size: 48px;
            color: white;
            background-color: black;
            border: 2px solid #333;
            padding: 20px;
            display: inline-block;
            margin: 10px 0;
            font-family: 'Digital-7 Mono', monospace;
        }

        .total {
            font-size: 18px;
            margin-top: 10px;
            color: green;
        }

        button {
            margin: 5px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #tables-container button.play {
            background-color: #4CAF50;
            color: white;
        }

        #tables-container button.pause {
            background-color: #f44336;
            color: white;
        }

        #tables-container button.reset {
            background-color: #555;
            color: white;
        }

        /* Additional styles from time.css */
        html {
            background: url('img/bg.jpg') #dbe4e6;
            overflow: hidden;
        }

        #clock {
            width: 370px;
            padding: 40px;
            margin: 20px auto;
            position: relative;
        }

        #clock:after {
            content: '';
            position: absolute;
            width: 400px;
            height: 20px;
            border-radius: 100%;
            left: 50%;
            margin-left: -200px;
            bottom: 2px;
            z-index: -1;
        }

        #clock .display {
            text-align: center;
            padding: 40px 20px 20px;
            border-radius: 6px;
            position: relative;
            height: 54px;
        }

        #clock.light {
            background-color: #f3f3f3;
            color: #272e38;
        }

        #clock.light:after {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        #clock.light .digits div span {
            background-color: #272e38;
            border-color: #272e38;
        }

        #clock.light .digits div.dots:before,
        #clock.light .digits div.dots:after {
            background-color: #272e38;
        }

        #clock.light .alarm {
            background: url('img/alarm_light.jpg');
        }

        #clock.light .display {
            background-color: #dddddd;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.08) inset, 0 1px 1px #fafafa;
        }

        #clock.dark {
            background-color: #272e38;
            color: #cacaca;
        }

        #clock.dark:after {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        #clock.dark .digits div span {
            background-color: #cacaca;
            border-color: #cacaca;
        }

        #clock.dark .alarm {
            background: url('img/alarm_dark.jpg');
        }

        #clock.dark .display {
            background-color: #0f1620;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.08) inset, 0 1px 1px #2d3642;
        }

        #clock.dark .digits div.dots:before,
        #clock.dark .digits div.dots:after {
            background-color: #cacaca;
        }

        #clock .digits div {
            text-align: left;
            position: relative;
            width: 28px;
            height: 50px;
            display: inline-block;
            margin: 0 4px;
        }

        #clock .digits div span {
            opacity: 0;
            position: absolute;
            transition: 0.25s;
        }

        #clock .digits div span:before,
        #clock .digits div span:after {
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border: 5px solid transparent;
        }

        #clock .digits .d1 {
            height: 5px;
            width: 16px;
            top: 0;
            left: 6px;
        }

        #clock .digits .d1:before {
            border-width: 0 5px 5px 0;
            border-right-color: inherit;
            left: -5px;
        }

        #clock .digits .d1:after {
            border-width: 0 0 5px 5px;
            border-left-color: inherit;
            right: -5px;
        }

        #clock .digits .d2 {
            height: 5px;
            width: 16px;
            top: 24px;
            left: 6px;
        }

        #clock .digits .d2:before {
            border-width: 3px 4px 2px;
            border-right-color: inherit;
            left: -8px;
        }

        #clock .digits .d2:after {
            border-width: 3px 4px 2px;
            border-left-color: inherit;
            right: -8px;
        }

        #clock .digits .d3 {
            height: 5px;
            width: 16px;
            top: 48px;
            left: 6px;
        }

        #clock .digits .d3:before {
            border-width: 5px 5px 0 0;
            border-right-color: inherit;
            left: -5px;
        }

        #clock .digits .d3:after {
            border-width: 5px 0 0 5px;
            border-left-color: inherit;
            right: -5px;
        }

        #clock .digits .d4 {
            width: 5px;
            height: 14px;
            top: 7px;
            left: 0;
        }

        #clock .digits .d4:before {
            border-width: 0 5px 5px 0;
            border-bottom-color: inherit;
            top: -5px;
        }

        #clock .digits .d4:after {
            border-width: 0 0 5px 5px;
            border-left-color: inherit;
            bottom: -5px;
        }

        #clock .digits .d5 {
            width: 5px;
            height: 14px;
            top: 7px;
            right: 0;
        }

        #clock .digits .d5:before {
            border-width: 0 0 5px 5px;
            border-bottom-color: inherit;
            top: -5px;
        }

        #clock .digits .d5:after {
            border-width: 5px 0 0 5px;
            border-top-color: inherit;
            bottom: -5px;
        }

        #clock .digits .d6 {
            width: 5px;
            height: 14px;
            top: 32px;
            left: 0;
        }

        #clock .digits .d6:before {
            border-width: 0 5px 5px 0;
            border-bottom-color: inherit;
            top: -5px;
        }

        #clock .digits .d6:after {
            border-width: 0 0 5px 5px;
            border-left-color: inherit;
            bottom: -5px;
        }

        #clock .digits .d7 {
            width: 5px;
            height: 14px;
            top: 32px;
            right: 0;
        }

        #clock .digits .d7:before {
            border-width: 0 0 5px 5px;
            border-bottom-color: inherit;
            top: -5px;
        }

        #clock .digits .d7:after {
            border-width: 5px 0 0 5px;
            border-top-color: inherit;
            bottom: -5px;
        }

        #clock .digits div.one .d5,
        #clock .digits div.one .d7 {
            opacity: 1;
        }

        #clock .digits div.two .d1,
        #clock .digits div.two #clock .digits div.two .d5,
        #clock .digits div.two .d2,
        #clock .digits div.two .d6,
        #clock .digits div.two .d3 {
            opacity: 1;
        }

        #clock .digits div.three .d1,
        #clock .digits div.three .d5,
        #clock .digits div.three .d2,
        #clock .digits div.three .d7,
        #clock .digits div.three .d3 {
            opacity: 1;
        }

        #clock .digits div.four .d5,
        #clock .digits div.four .d2,
        #clock .digits div.four .d4,
        #clock .digits div.four .d7 {
            opacity: 1;
        }

        #clock .digits div.five .d1,
        #clock .digits div.five .d2,
        #clock .digits div.five .d4,
        #clock .digits div.five .d3,
        #clock .digits div.five .d7 {
            opacity: 1;
        }

        #clock .digits div.six .d1,
        #clock .digits div.six .d2,
        #clock .digits div.six .d4,
        #clock .digits div.six .d3,
        #clock .digits div.six .d6,
        #clock .digits div.six .d7 {
            opacity: 1;
        }

        #clock .digits div.seven .d1,
        #clock .digits div.seven .d5,
        #clock .digits div.seven .d7 {
            opacity: 1;
        }

        #clock .digits div.eight .d1,
        #clock .digits div.eight .d2,
        #clock .digits div.eight .d3,
        #clock .digits div.eight .d4,
        #clock .digits div.eight .d5,
        #clock .digits div.eight .d6,
        #clock .digits div.eight .d7 {
            opacity: 1;
        }

        #clock .digits div.nine .d1,
        #clock .digits div.nine .d2,
        #clock .digits div.nine .d3,
        #clock .digits div.nine .d4,
        #clock .digits div.nine .d5,
        #clock .digits div.nine .d7 {
            opacity: 1;
        }

        #clock .digits div.zero .d1,
        #clock .digits div.zero .d3,
        #clock .digits div.zero .d4,
        #clock .digits div.zero .d5,
        #clock .digits div.zero .d6,
        #clock .digits div.zero .d7 {
            opacity: 1;
        }

        #clock .digits div.dots {
            width: 5px;
        }

        #clock .digits div.dots:before,
        #clock .digits div.dots:after {
            width: 5px;
            height: 5px;
            content: '';
            position: absolute;
            left: 0;
            top: 14px;
        }

        #clock .digits div.dots:after {
            top: 34px;
        }

        #clock .alarm {
            width: 16px;
            height: 16px;
            bottom: 20px;
            background: url('img/alarm_light.jpg');
            position: absolute;
            opacity: 0.2;
        }

        #clock .alarm.active {
            opacity: 1;
        }

        #clock .weekdays {
            font-size: 12px;
            position: absolute;
            width: 100%;
            top: 10px;
            left: 0;
            text-align: center;
        }

        #clock .weekdays span {
            opacity: 0.2;
            padding: 0 10px;
        }

        #clock .weekdays span.active {
            opacity: 1;
        }

        #clock .ampm {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 12px;
        }

        a.button {
            background-color: #f6a7b3;
            background-image: linear-gradient(top, #f6a7b3, #f0a3af);
            border: 1px solid #eb9ba7;
            border-radius: 2px;
            box-shadow: 0 2px 2px #ccc;
            color: #fff;
            text-decoration: none !important;
            padding: 15px 20px;
            display: inline-block;
            cursor: pointer;
        }

        a.button:hover {
            opacity: 0.9;
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            #tables-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            #tables-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <h1>Billiards Countdown Timer</h1>

    <h3>One hour = 20 yuan</h3>
    <div id="tables-container"></div>

    <script>
        // Combined script.js and time.js content
        document.addEventListener('DOMContentLoaded', () => {
            const tablesContainer = document.getElementById('tables-container');
            const tablesCount = 12;

            for (let i = 1; i <= tablesCount; i++) {
                const table = document.createElement('div');
                table.className = 'table';
                table.id = `table-${i}`;
                table.innerHTML = `
                    <h2>Table ${i}</h2>
                    <div class="timer" id="timer-${i}">00:00:00</div>
                    <div id="total-${i}" class="total">Total = ${localStorage.getItem(`total-${i}`) || 0} Kyats</div>
                    <button class="play" onclick="startTimer(${i})">Play</button>
                    <button class="pause" onclick="pauseTimer(${i})">Pause</button>
                    <button class="reset" onclick="resetTimer(${i})">Reset</button>
                `;
                tablesContainer.appendChild(table);

                const savedData = loadTimerState(i);
                if (savedData) {
                    timers[i] = savedData.seconds;
                    document.getElementById(`timer-${i}`).innerText = formatTime(savedData.seconds);
                    if (savedData.state === 'running') {
                        startTimer(i);
                    } else {
                        updateTotal(i); // Ensure total is updated based on loaded time
                    }
                }
            }
        });

        const timers = {};
        const intervals = {};

        function startTimer(tableId) {
            if (!timers[tableId]) {
                timers[tableId] = loadTimerState(tableId) || 0;
            }
            saveTimerState(tableId, timers[tableId], 'running');
            if (intervals[tableId]) {
                clearInterval(intervals[tableId]);
            }
            intervals[tableId] = setInterval(() => {
                timers[tableId]++;
                saveTimerState(tableId, timers[tableId], 'running');
                document.getElementById(`timer-${tableId}`).innerText = formatTime(timers[tableId]);
                if (timers[tableId] % 600 === 0) {
                    updateTotal(tableId);
                }
            }, 1000);
        }

        function pauseTimer(tableId) {
            clearInterval(intervals[tableId]);
            saveTimerState(tableId, timers[tableId], 'paused');
        }

        function resetTimer(tableId) {
            clearInterval(intervals[tableId]);
            timers[tableId] = 0;
            saveTimerState(tableId, 0, 'reset');
            document.getElementById(`timer-${tableId}`).innerText = formatTime(0);
            updateTotal(tableId, true); // Call with reset flag true
        }

        function stopAllTimers() {
            for (const tableId in intervals) {
                if (intervals.hasOwnProperty(tableId)) {
                    clearInterval(intervals[tableId]);
                    saveTimerState(tableId, timers[tableId], 'paused');
                }
            }
        }

        function formatTime(seconds) {
            const hrs = Math.floor(seconds / 3600);
            const mins = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            return `${pad(hrs)}:${pad(mins)}:${pad(secs)}`;
        }

        function pad(number) {
            return number < 10 ? `0${number}` : number;
        }

        function updateTotal(tableId, reset = false) {
            const ratePerHour = 20;
            const hours = timers[tableId] / 3600;
            const total = reset ? 0 : Math.ceil(hours * 6) / 6 * ratePerHour;
            document.getElementById(`total-${tableId}`).innerText = `Total = ${total.toFixed(0)} Kyats`;
            localStorage.setItem(`total-${tableId}`, total.toFixed(0)); // Save total to localStorage
        }

        function saveTimerState(tableId, seconds, state) {
            const timerData = { seconds: seconds, state: state };
            localStorage.setItem(`timer-${tableId}`, JSON.stringify(timerData));
        }

        function loadTimerState(tableId) {
            const data = localStorage.getItem(`timer-${tableId}`);
            if (data) {
                return JSON.parse(data);
            }
            return null;
        }

        $(function () {
            // Cache some selectors
            var clock = $('#clock'),
                alarm = clock.find('.alarm'),
                ampm = clock.find('.ampm');

            // Map digits to their names (this will be an array)
            var digit_to_name = 'zero one two three four five six seven eight nine'.split(' ');

            // This object will hold the digit elements
            var digits = {};

            // Positions for the hours, minutes, and seconds
            var positions = [
                'h1', 'h2', ':', 'm1', 'm2', ':', 's1', 's2'
            ];

            // Generate the digits with the needed markup,
            // and add them to the clock
            var digit_holder = clock.find('.digits');

            $.each(positions, function () {
                if (this == ':') {
                    digit_holder.append('<div class="dots">');
                } else {
                    var pos = $('<div>');
                    for (var i = 1; i < 8; i++) {
                        pos.append('<span class="d' + i + '">');
                    }
                    // Set the digits as key:value pairs in the digits object
                    digits[this] = pos;
                    // Add the digit elements to the page
                    digit_holder.append(pos);
                }
            });

            // Add the weekday names
            var weekday_names = 'MON TUE WED THU FRI SAT SUN'.split(' '),
                weekday_holder = clock.find('.weekdays');

            $.each(weekday_names, function () {
                weekday_holder.append('<span>' + this + '</span>');
            });

            var weekdays = clock.find('.weekdays span');

            // Run a timer every second and update the clock
            (function update_time() {
                var now = moment().format("hhmmssdA");
                digits.h1.attr('class', digit_to_name[now[0]]);
                digits.h2.attr('class', digit_to_name[now[1]]);
                digits.m1.attr('class', digit_to_name[now[2]]);
                digits.m2.attr('class', digit_to_name[now[3]]);
                digits.s1.attr('class', digit_to_name[now[4]]);
                digits.s2.attr('class', digit_to_name[now[5]]);

                var dow = now[6];
                dow--;
                if (dow < 0) {
                    dow = 6;
                }
                weekdays.removeClass('active').eq(dow).addClass('active');
                ampm.text(now[7] + now[8]);

                setTimeout(update_time, 1000);
            })();

            $('a.button').click(function () {
                clock.toggleClass('light dark');
            });
        });
    </script>
</body>

</html>